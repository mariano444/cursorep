<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Curso Avanzado de Electr√≥nica para Reparaci√≥n de Celulares</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.9.55/css/materialdesignicons.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@400;600;700&display=swap');

    :root {
      --primary-color: #3498db;
      --secondary-color: #2c3e50;
      --accent-color: #e74c3c;
      --success-color: #2ecc71;
      --warning-color: #f39c12;
      --background-color: #f4f4f4;
      --text-color: #333;
      --card-background: #fff;
      --border-radius: 8px;
      --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --transition-speed: 0.3s;
    }

    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--background-color);
      color: var(--text-color);
      transition: background-color var(--transition-speed), color var(--transition-speed);
    }

    .dark-mode {
      --primary-color: #3498db;
      --secondary-color: #34495e;
      --accent-color: #e74c3c;
      --success-color: #2ecc71;
      --warning-color: #f39c12;
      --background-color: #1a1a1a;
      --text-color: #f4f4f4;
      --card-background: #2c2c2c;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      background-color: var(--secondary-color);
      color: #fff;
      padding: 20px 0;
      text-align: center;
      box-shadow: var(--box-shadow);
    }

    h1, h2, h3, h4, h5, h6 {
      font-family: 'Poppins', sans-serif;
    }

    h1 {
      margin: 0;
      font-size: 2.5rem;
      font-weight: 700;
    }

    nav {
      background-color: var(--primary-color);
      padding: 10px 0;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: var(--box-shadow);
    }

    nav ul {
      list-style-type: none;
      padding: 0;
      margin: 0;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }

    nav ul li {
      margin: 5px 10px;
    }

    nav ul li a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
      padding: 5px 10px;
      border-radius: var(--border-radius);
      transition: background-color var(--transition-speed);
    }

    nav ul li a:hover,
    nav ul li a.active {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .content {
      display: flex;
      margin-top: 20px;
      gap: 20px;
    }

    .sidebar {
      width: 250px;
      background-color: var(--card-background);
      padding: 20px;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      transition: background-color var(--transition-speed);
    }

    .main-content {
      flex: 1;
      background-color: var(--card-background);
      padding: 20px;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      transition: background-color var(--transition-speed);
    }

    h2 {
      /*color: var(--primary-color);*/
      border-bottom: 2px solid var(--primary-color);
      padding-bottom: 10px;
      margin-top: 0;
    }

    .class-list {
      list-style-type: none;
      padding: 0;
    }

    .class-item {
      margin-bottom: 10px;
      padding: 10px;
      background-color: var(--background-color);
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: background-color var(--transition-speed), color var(--transition-speed);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .class-item:hover {
      background-color: var(--primary-color);
      color: #fff;
    }

    .class-item.active {
      background-color: var(--primary-color);
      color: #fff;
    }

    .class-item .mdi {
      font-size: 1.2rem;
    }

    .progress-bar {
      background-color: #e0e0e0;
      height: 20px;
      border-radius: 10px;
      margin-top: 20px;
      overflow: hidden;
    }

    .progress {
      background-color: var(--success-color);
      height: 100%;
      transition: width 0.5s ease-in-out;
    }

    .material,
    .activity {
      margin-bottom: 20px;
      padding: 15px;
      background-color: var(--background-color);
      border-radius: var(--border-radius);
      transition: background-color var(--transition-speed);
    }

    .quiz-container {
      margin-top: 20px;
      padding: 20px;
      background-color: var(--background-color);
      border-radius: var(--border-radius);
      transition: background-color var(--transition-speed);
    }

    .quiz-question {
      font-weight: bold;
      margin-bottom: 10px;
    }

    .quiz-options {
      list-style-type: none;
      padding: 0;
    }

    .quiz-option {
      margin-bottom: 10px;
      padding: 10px;
      background-color: var(--card-background);
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: background-color var(--transition-speed), color var(--transition-speed);
    }

    .quiz-option:hover {
      background-color: var(--primary-color);
      color: #fff;
    }

    .quiz-option.correct {
      background-color: var(--success-color);
      color: #fff;
    }

    .quiz-option.incorrect {
      background-color: var(--accent-color);
      color: #fff;
    }

    button {
      background-color: var(--primary-color);
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 1rem;
      transition: background-color var(--transition-speed);
    }

    button:hover {
      background-color: var(--secondary-color);
    }

    .dark-mode-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: var(--secondary-color);
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      transition: background-color var(--transition-speed);
      z-index: 1001;
    }

    .dark-mode-toggle:hover {
      background-color: var(--primary-color);
    }

    .dashboard-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }

    .dashboard-card {
      background-color: var(--card-background);
      border-radius: var(--border-radius);
      padding: 20px;
      text-align: center;
      box-shadow: var(--box-shadow);
      transition: background-color var(--transition-speed);
    }

    .dashboard-card h3 {
      margin-top: 0;
      color: var(--primary-color);
    }

    .dashboard-card p {
      font-size: 2rem;
      font-weight: bold;
      margin: 10px 0;
    }

    .class-progress {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .class-progress-bar {
      flex-grow: 1;
      height: 10px;
      background-color: #e0e0e0;
      border-radius: 5px;
      margin-right: 10px;
      overflow: hidden;
    }

    .class-progress-value {
      height: 100%;
      background-color: var(--success-color);
      transition: width 0.5s ease-in-out;
    }

    .virtual-lab {
      margin-top: 20px;
      padding: 20px;
      background-color: var(--background-color);
      border-radius: var(--border-radius);
      transition: background-color var(--transition-speed);
    }

    .virtual-lab canvas {
      width: 100%;
      height: 300px;
      border: 1px solid var(--primary-color);
      border-radius: var(--border-radius);
    }

    .notes-container {
      margin-top: 20px;
    }

    .notes-container textarea {
      width: 100%;
      height: 150px;
      padding: 10px;
      border-radius: var(--border-radius);
      border: 1px solid var(--primary-color);
      background-color: var(--card-background);
      color: var(--text-color);
      font-family: 'Roboto', sans-serif;
      resize: vertical;
    }

    .forum-container {
      margin-top: 20px;
    }

    .forum-post {
      background-color: var(--background-color);
      border-radius: var(--border-radius);
      padding: 15px;
      margin-bottom: 15px;
    }

    .forum-post h4 {
      margin-top: 0;
      color: var(--primary-color);
    }

    .search-container {
      margin-bottom: 20px;
    }

    .search-container input {
      width: 100%;
      padding: 10px;
      border-radius: var(--border-radius);
      border: 1px solid var(--primary-color);
      background-color: var(--card-background);
      color: var(--text-color);
    }

    .glossary-container {
      margin-top: 20px;
    }

    .glossary-term {
      margin-bottom: 15px;
    }

    .glossary-term h4 {
      color: var(--primary-color);
      margin-bottom: 5px;
    }

    .feedback-container {
      margin-top: 20px;
    }

    .feedback-container textarea {
      width: 100%;
      height: 100px;
      padding: 10px;
      border-radius: var(--border-radius);
      border: 1px solid var(--primary-color);
      background-color: var(--card-background);
      color: var(--text-color);
      font-family: 'Roboto', sans-serif;
      resize: vertical;
    }

    @media (max-width: 768px) {
      .content {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        margin-bottom: 20px;
      }

      .main-content {
        margin-left: 0;
      }
    }


    .course-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header Styles */
        .course-header {
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: #fff;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .course-header:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .course-title {
            font-size: 2.5em;
            margin-bottom: 0.5rem;
        }

        .course-description {
            font-size: 1.1em;
            opacity: 0.9;
        }

        /* Section Styles */
        section {
            background: #ffffff;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, #3498db, #2ecc71);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        section:hover::before {
            transform: scaleX(1);
        }

        section:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        h3 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            position: relative;
        }

        h3::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: #2ecc71;
            transition: width 0.3s ease;
        }

        section:hover h3::after {
            width: 100%;
        }

        /* Material and Activity Items */
        .material-item, .activity-item {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .material-item:hover, .activity-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
            border-left-color: #3498db;
        }

        /* Button Styles */
        .btn {
            background-color: #3498db;
            color: #fff;
            border: none;
            padding: 12px 20px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 1rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        /* Text Areas */
        textarea {
            width: 100%;
            height: 150px;
            border: 1px solid #bdc3c7;
            border-radius: 8px;
            padding: 1rem;
            font-size: 1em;
            resize: vertical;
            transition: all 0.3s ease;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        textarea:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        /* Quiz Styles */
        .quiz-options {
            list-style: none;
            padding: 0;
        }

        .quiz-option {
            background-color: #ecf0f1;
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .quiz-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: all 0.5s;
        }

        .quiz-option:hover::before {
            left: 100%;
        }

        .quiz-option:hover {
            background-color: #bdc3c7;
            transform: translateX(5px);
        }

        .quiz-option.correct {
            background-color: #2ecc71;
            color: white;
        }

        .quiz-option.incorrect {
            background-color: #e74c3c;
            color: white;
        }

        /* Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animated {
            animation-duration: 1s;
            animation-fill-mode: both;
        }

        .fadeInUp {
            animation-name: fadeInUp;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .course-container {
                padding: 1rem;
            }

            .course-title {
                font-size: 2.2em;
            }

            section {
                padding: 1.5rem;
            }
        }
            /* Estilos b√°sicos para la visualizaci√≥n */
    .circuitos-container {
      max-width: 600px;
      margin: 0 auto;
      font-family: Arial, sans-serif;
    }
    .circuito-tipo {
      border: 1px solid #ccc;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
    }
    .circuito-img {
      display: block;
      margin-bottom: 10px;
    }
    .btn-simular {
      padding: 10px 20px;
      cursor: pointer;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
    }
    .sim-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #f9f9f9;
      border: 2px solid #ccc;
      padding: 20px;
      z-index: 1000;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
    }
    .sim-container h3 {
      margin-top: 0;
    }
    .btn-cerrar {
      margin-top: 10px;
      padding: 5px 10px;
      cursor: pointer;
      background-color: #d9534f;
      color: white;
      border: none;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div id="app">
    <header>
      <h1>{{ title }}</h1>
    </header>
    <nav>
      <ul>
        <li><a href="#" :class="{ active: currentView === 'dashboard' }" @click="currentView = 'dashboard'">Dashboard</a></li>
        <li><a href="#" :class="{ active: currentView === 'course' }" @click="currentView = 'course'">Contenido del Curso</a></li>
        <!--li><a href="#" :class="{ active: currentView === 'forum' }" @click="currentView = 'forum'">Foro de Discusi√≥n</a></li>
        <li><a href="#" :class="{ active: currentView === 'glossary' }" @click="currentView = 'glossary'">Glosario</a></li>
        <li><a href="#" :class="{ active: currentView === 'certificate' }" @click="currentView = 'certificate'">Certificado</a></li-->
      </ul>
    </nav>
    <div class="container">
      <div class="search-container">
        <input type="text" v-model="searchQuery" @input="searchContent" placeholder="Buscar en el contenido del curso...">
      </div>
      <div class="content">
        <div class="sidebar">
          <h2>Clases</h2>
          <ul class="class-list">
            <!-- Usamos el t√≠tulo de la clase como clave para evitar duplicados -->
            <li v-for="(clase, index) in classes" :key="clase.title"
                :class="['class-item', { active: currentClass === index }]"
                @click="selectClass(index)"
                :style="{ opacity: clase.unlocked ? 1 : 0.5 }">
              <span>{{ clase.title }}</span>
              <span :class="['mdi', {
                'mdi-lock': !clase.unlocked,
                'mdi-check-circle': clase.completed,
                'mdi-play-circle': clase.unlocked && !clase.completed
              }]"></span>
            </li>
          </ul>
          <div class="progress-bar">
            <div class="progress" :style="{ width: progress + '%' }"></div>
          </div>
          <p>Progreso total: {{ progress }}%</p>
        </div>
        <div class="main-content">
          <div v-if="currentView === 'dashboard'">
            <h2>Dashboard</h2>
            <div class="dashboard-summary">
              <div class="dashboard-card">
                <h3>Progreso Total</h3>
                <p>{{ progress }}%</p>
              </div>
              <div class="dashboard-card">
                <h3>Clases Completadas</h3>
                <p>{{ completedClasses }}/{{ classes.length }}</p>
              </div>
              <div class="dashboard-card">
                <h3>Tiempo Estimado</h3>
                <p>{{ totalEstimatedTime }} horas</p>
              </div>
            </div>
            <h3>Progreso por Clase</h3>
            <div v-for="(clase, index) in classes" :key="clase.title" class="class-progress">
              <div class="class-progress-bar">
                <div class="class-progress-value" :style="{ width: getClassProgress(index) + '%' }"></div>
              </div>
              <span>{{ clase.title }} - {{ getClassProgress(index) }}%</span>
            </div>
            <canvas id="progressChart"></canvas>
          </div>

          <div v-else-if="currentView === 'course'" class="course-content">
            <!-- Encabezado de la clase -->
            <header class="course-header">
              <h2 class="course-title">{{ currentClassData.title }}</h2>
              <p class="course-description">{{ currentClassData.description }}</p>
            </header>
          
            <!-- Secci√≥n de Material Te√≥rico -->
            <section class="materials-section">
              <h3>Material Te√≥rico</h3>
              <div v-for="(material, index) in currentClassData.materials" :key="index" class="material-item">
                <h4>{{ material.title }}</h4>
                <!-- Se usa v-html para permitir la inserci√≥n de formato HTML en el contenido -->
                <p v-html="material.content"></p>
              </div>
            </section>
          
            <!-- Secci√≥n de Actividades 
            <section class="activities-section">
              <h3>Actividades Pr√°cticas</h3>
              <div v-for="(activity, index) in currentClassData.activities" :key="index" class="activity-item">
                <h4>{{ activity.title }}</h4>
                <p>{{ activity.description }}</p>
              </div>
            </section>-->
          
            <!-- Laboratorio Virtual 
            <section class="virtual-lab-section">
              <h3>Laboratorio Virtual</h3>
              <canvas id="virtualLab"></canvas>
              <button class="btn-simulation" @click="runSimulation">Ejecutar Simulaci√≥n</button>
            </section>-->
          
            <!-- Notas del Estudiante 
            <section class="notes-section">
              <h3>Mis Notas</h3>
              <textarea v-model="currentClassData.notes" class="notes-editor" placeholder="Escribe tus notas aqu√≠..."></textarea>
            </section>-->
          
            <!-- Notas Complementarias 
            <section class="complementary-notes-section">
              <h3>Notas Complementarias</h3>
              <textarea v-model="currentClassData.complementaryNotes" class="complementary-notes-editor" placeholder="Agrega notas complementarias, ideas o comentarios adicionales..."></textarea>
            </section>-->
          
            <!-- Secci√≥n del Quiz -->
            <section class="quiz-section" v-if="!currentClassData.completed">
              <h3>Quiz</h3>
              <div v-if="currentQuestionIndex < currentClassData.quiz.length">
                <p class="quiz-question">{{ currentClassData.quiz[currentQuestionIndex].question }}</p>
                <ul class="quiz-options">
                  <li v-for="(option, index) in currentClassData.quiz[currentQuestionIndex].options"
                      :key="index"
                      :class="['quiz-option', {
                        'correct': showAnswers && index === currentClassData.quiz[currentQuestionIndex].correctAnswer,
                        'incorrect': showAnswers && selectedAnswer === index && index !== currentClassData.quiz[currentQuestionIndex].correctAnswer
                      }]"
                      @click="selectAnswer(index)">
                    {{ option }}
                  </li>
                </ul>
                <button class="btn-verify" @click="checkAnswer" v-if="!showAnswers">Verificar Respuesta</button>
                <button class="btn-next" @click="nextQuestion" v-else>Siguiente Pregunta</button>
              </div>
              <div v-else>
                <p class="quiz-result">Has completado el quiz. Puntuaci√≥n: {{ quizScore }} de {{ currentClassData.quiz.length }}</p>
                <button class="btn-complete" @click="completeClass" v-if="quizScore >= currentClassData.quiz.length * 0.7">Marcar clase como completada</button>
                <button class="btn-retry" @click="resetQuiz" v-else>Reintentar Quiz</button>
              </div>
            </section>
          </div>
          
          <div v-else-if="currentView === 'forum'">
            <h2>Foro de Discusi√≥n</h2>
            <div v-for="(post, index) in forumPosts" :key="post.date + '-' + index" class="forum-post">
              <h4>{{ post.title }}</h4>
              <p>{{ post.content }}</p>
              <small>Por: {{ post.author }} - {{ post.date }}</small>
            </div>
            <button @click="addForumPost">Agregar Nueva Publicaci√≥n</button>
          </div>
          <div v-else-if="currentView === 'glossary'">
            <h2>Glosario de T√©rminos T√©cnicos</h2>
            <div v-for="(term, index) in glossaryTerms" :key="term.term" class="glossary-term">
              <h4>{{ term.term }}</h4>
              <p>{{ term.definition }}</p>
            </div>
          </div>
          <div v-else-if="currentView === 'certificate'">
            <h2>Certificado de Finalizaci√≥n</h2>
            <div v-if="progress === 100">
              <p>¬°Felicidades! Has completado el curso. Aqu√≠ est√° tu certificado:</p>
              <div id="certificate">
                <h3>Certificado de Finalizaci√≥n</h3>
                <p>Este certifica que</p>
                <h4>{{ studentName }}</h4>
                <p>ha completado exitosamente el</p>
                <h4>{{ title }}</h4>
                <p>Fecha: {{ new Date().toLocaleDateString() }}</p>
              </div>
              <button @click="downloadCertificate">Descargar Certificado</button>
            </div>
            <div v-else>
              <p>Completa todas las clases para obtener tu certificado.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--button class="dark-mode-toggle" @click="toggleDarkMode">
      <span class="mdi" :class="isDarkMode ? 'mdi-weather-sunny' : 'mdi-weather-night'"></span>
    </button>
    <div class="feedback-container">
      <h3>Enviar Comentarios</h3>
      <textarea v-model="feedback" placeholder="Comparte tus comentarios sobre el curso..."></textarea>
      <button @click="submitFeedback">Enviar Comentarios</button>
    </div-->
  </div>
<!-- Carga la librer√≠a de Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

  <script>

/***********************
 * Inicializaci√≥n de Supabase
 ***********************/
// Se asume que la librer√≠a de Supabase ya ha sido incluida (por ejemplo, v√≠a un script en el HTML)
window.supabase = supabase.createClient(
  'https://hygdbhdujdvtuuagwfit.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5Z2RiaGR1amR2dHV1YWd3Zml0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzg3Nzg3MzUsImV4cCI6MjA1NDM1NDczNX0.jDIZD6cXQHjkojSg_vJ0Q_cvTXVEG_B_NaiRnJZTDas'
);

// Verificar si existe el usuario en sessionStorage (clave "user")
const storedUser = sessionStorage.getItem("user");
if (!storedUser) {
  window.location.href = "login.html";
} else {
  // Se parsea el usuario (opcional, seg√∫n lo que necesites)
  const user = JSON.parse(storedUser);
  // Aqu√≠ puedes continuar utilizando la variable "user" si lo requieres
}

// Guarda o actualiza el avance del usuario
async function guardarAvance(alumnoId, moduloActual, porcentajeCompletado, mensajeMotivacional) {
  const { data, error } = await supabase
    .from('avance_curso')
    .upsert([
      {
        alumno_id: alumnoId,
        modulo_actual: moduloActual,
        porcentaje_completado: porcentajeCompletado,
        mensaje_motivacional: mensajeMotivacional,
        fecha_ultimo_acceso: new Date().toISOString()
      }
    ], { onConflict: ['alumno_id'] });
  
  if (error) {
    console.error("Error guardando el avance:", error);
  } else {
    console.log(`Avance guardado: M√≥dulo ${moduloActual}, ${porcentajeCompletado}% completado`);
  }
  return data;
}

// Carga el avance guardado para el usuario
async function cargarAvance(alumnoId) {
  const { data, error } = await supabase
    .from('avance_curso')
    .select('*')
    .eq('alumno_id', alumnoId)
    .single(); // Suponiendo que cada alumno tiene un √∫nico registro
  
  if (error) {
    console.error("Error cargando el avance:", error);
    return null;
  }
  return data;
}


async function getStudentId() {
  // Extraemos la sesi√≥n con la estructura recomendada en supabase‚Äëjs v2
  const { data: { session }, error } = await supabase.auth.getSession();
  if (error || !session) {
    console.error("No hay sesi√≥n activa:", error);
    return null;
  }
  return session.user.id;
}

async function signInWithEmail(email, password) {
  const { data, error } = await supabase.auth.signInWithPassword({
    email,
    password
  });

  if (error) {
    console.error("Error al iniciar sesi√≥n:", error);
  } else {
    console.log("Inicio de sesi√≥n exitoso:", data);
    // Guardar la sesi√≥n en localStorage
    // Se asume que data.session es un objeto con access_token y refresh_token, entre otros
    localStorage.setItem('supabase.auth.token', JSON.stringify(data.session));
  }
}

async function restoreSession() {
  const savedSession = localStorage.getItem('supabase.auth.token');
  if (savedSession) {
    const session = JSON.parse(savedSession);
    // Se restablece la sesi√≥n utilizando √∫nicamente access_token y refresh_token
    await supabase.auth.setSession({
      access_token: session.access_token,
      refresh_token: session.refresh_token
    });
  }
}
restoreSession();

async function loadProgress(studentId) {
  const { data, error } = await supabase
    .from('avance_curso')
    .select('*')
    .eq('alumno_id', studentId);
    
  if (error) {
    console.error("Error cargando el avance del curso:", error);
    return null;
  }
  return data && data.length > 0 ? data[0] : null;
}

async function saveProgress(studentId, moduloActual, porcentajeCompletado, mensajeMotivacional) {
  console.log("Guardando progreso...", { studentId, moduloActual, porcentajeCompletado, mensajeMotivacional });

  const { data, error } = await supabase
    .from('avance_curso')
    .upsert([
      {
        alumno_id: studentId,
        modulo_actual: moduloActual,
        porcentaje_completado: porcentajeCompletado,
        mensaje_motivacional: mensajeMotivacional,
        fecha_ultimo_acceso: new Date().toISOString()
      }
    ], { onConflict: ['alumno_id'] });

  if (error) {
    console.error("Error al guardar el progreso:", error);
  } else {
    console.log("Progreso guardado correctamente:", data);
  }
}

async function actualizarProgreso(studentId, moduloActual, porcentajeCompletado) {
  const nuevoModulo = Math.min(moduloActual + 1, 6); // Asegura que no sobrepase el n√∫mero m√°ximo de m√≥dulos
  const nuevoPorcentaje = Math.min(porcentajeCompletado + 14.29, 100);

  const { error } = await supabase
    .from('avance_curso')
    .update({
      modulo_actual: nuevoModulo,
      porcentaje_completado: nuevoPorcentaje,
      fecha_ultimo_acceso: new Date().toISOString()
    })
    .eq('alumno_id', studentId);

  if (error) {
    console.error("Error actualizando el progreso:", error);
  } else {
    console.log(`Progreso actualizado: M√≥dulo ${nuevoModulo}, ${nuevoPorcentaje}% completado`);
  }
}

     // Funci√≥n principal que redirige seg√∫n el tipo de circuito
 function simularCircuito(tipo) {
      switch (tipo) {
        case 'analogico':
          simularAnalogico();
          break;
        case 'digital':
          simularDigital();
          break;
        default:
          console.error('Tipo de circuito no reconocido');
      }
    }

    // Funci√≥n para simular un circuito anal√≥gico
    function simularAnalogico() {
      // Crear un contenedor modal para la simulaci√≥n
      const simContainer = document.createElement('div');
      simContainer.className = 'sim-container';
      simContainer.innerHTML = '<h3>Simulaci√≥n de Circuito Anal√≥gico</h3>';

      // Crear un canvas para dibujar la se√±al senoidal
      const canvas = document.createElement('canvas');
      canvas.width = 300;
      canvas.height = 150;
      simContainer.appendChild(canvas);

      // Dibujar una onda senoidal en el canvas
      const ctx = canvas.getContext('2d');
      ctx.beginPath();
      for (let x = 0; x < canvas.width; x++) {
        // Ejemplo de se√±al: onda senoidal simple
        const y = canvas.height / 2 + Math.sin(x * 0.1) * 40;
        if (x === 0) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      }
      ctx.strokeStyle = 'blue';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Bot√≥n para cerrar la simulaci√≥n
      const btnCerrar = document.createElement('button');
      btnCerrar.className = 'btn-cerrar';
      btnCerrar.textContent = 'Cerrar Simulaci√≥n';
      btnCerrar.onclick = () => document.body.removeChild(simContainer);
      simContainer.appendChild(btnCerrar);

      // Agregar el contenedor al body para mostrar la simulaci√≥n
      document.body.appendChild(simContainer);
    }

    // Funci√≥n para simular un circuito digital
    function simularDigital() {
      // Crear un contenedor modal para la simulaci√≥n
      const simContainer = document.createElement('div');
      simContainer.className = 'sim-container';
      simContainer.innerHTML = '<h3>Simulaci√≥n de Circuito Digital</h3>';

      // Ejemplo: Simulaci√≥n de una compuerta AND
      // Generamos dos entradas aleatorias (0 o 1)
      const inputA = Math.round(Math.random());
      const inputB = Math.round(Math.random());
      // La salida es el resultado de la compuerta AND
      const output = inputA && inputB;

      const resultText = document.createElement('p');
      resultText.textContent = `Entrada A: ${inputA} - Entrada B: ${inputB} ‚áí Salida (A AND B): ${output}`;
      simContainer.appendChild(resultText);

      // Bot√≥n para cerrar la simulaci√≥n
      const btnCerrar = document.createElement('button');
      btnCerrar.className = 'btn-cerrar';
      btnCerrar.textContent = 'Cerrar Simulaci√≥n';
      btnCerrar.onclick = () => document.body.removeChild(simContainer);
      simContainer.appendChild(btnCerrar);

      // Agregar el contenedor al body para mostrar la simulaci√≥n
      document.body.appendChild(simContainer);
    }

    new Vue({
      el: '#app',
      data: {
        title: 'Curso Avanzado de Electr√≥nica para Reparaci√≥n de Celulares',
        currentView: 'dashboard',
        currentClass: 0,
        currentQuestionIndex: 0,
        quizScore: 0,
        isDarkMode: false,
        searchQuery: '',
        feedback: '',
        showAnswers: false,
        student: null,

        selectedAnswer: null,
        studentName: '',
        progressData: null,
        progress: 0,
        progressValue: 0,
        globalProgress: 0,
        currentView: 'dashboard',
      currentClass: 0,
      // ... dem√°s propiedades existentes ...
      student: null,         // Datos del alumno
      progressData: null ,
        studentName: 'Estudiante Ejemplo',
        classes: [
  {
    "title": "Introducci√≥n a la Electr√≥nica",
    "description": "Esta clase te brinda una introducci√≥n profunda y pr√°ctica a la electr√≥nica, estableciendo una base s√≥lida en los principios fundamentales y avanzando hacia la aplicaci√≥n de circuitos anal√≥gicos y digitales. Con simulaciones interactivas, ejercicios pr√°cticos y recursos complementarios, estar√°s preparado para dise√±ar y analizar circuitos con confianza.",
    "progress": 0,
    "completed": false,
    "unlocked": true,
    "estimatedTime": 3,
    "notes": "Revisa cada secci√≥n y aprovecha las simulaciones y ejercicios interactivos para fortalecer tu comprensi√≥n.",
    "materials": [
      {
        "id": "teoria",
        "title": "Teor√≠a de la Electr√≥nica",
        "content": "\n        <div class=\"teoria-container\">\n          <h3>Conceptos B√°sicos</h3>\n          <ul class=\"concepto-list\">\n            <li class=\"concepto-item\">\n              <span class=\"icon\">‚ö°</span>\n              <strong>Voltaje:</strong> Diferencia de potencial que impulsa el flujo de electrones, esencial para el funcionamiento de cualquier circuito (V).\n            </li>\n            <li class=\"concepto-item\">\n              <span class=\"icon\">üîå</span>\n              <strong>Corriente:</strong> Flujo de electrones que circula a trav√©s de un conductor, medido en amperios (A).\n            </li>\n            <li class=\"concepto-item\">\n              <span class=\"icon\">üõë</span>\n              <strong>Resistencia:</strong> Oposici√≥n al paso de la corriente, fundamental para controlar el comportamiento del circuito (Œ©).\n            </li>\n          </ul>\n          <div class=\"formula-container\">\n            <h4>Ley de Ohm:</h4>\n            <p>Relaciona el voltaje (V), la corriente (I) y la resistencia (R):</p>\n            <div class=\"formula\">V = I ¬∑ R</div>\n            <h4>Potencia:</h4>\n            <p>Calcula la energ√≠a consumida o disipada en un circuito:</p>\n            <div class=\"formula\">P = V ¬∑ I</div>\n          </div>\n          <div class=\"ejemplo-container\">\n            <h4>Ejemplo Pr√°ctico:</h4>\n            <p>Si se aplica una fuente de 5V a una resistencia de 220Œ©, la corriente resultante es de aproximadamente 22.7 mA, calculada como I = V / R.</p>\n            <button class=\"btn-calcular\" onclick=\"calcularEjemplo()\">Calcular</button>\n            <div id=\"resultado-ejemplo\" class=\"resultado\"></div>\n          </div>\n        </div>\n      ",
        "completed": false
      },
      {
        "id": "componentes",
        "title": "Componentes Electr√≥nicos",
        "content": "\n        <div class=\"componentes-container\">\n          <div class=\"componente-item\">\n            <h3>Resistencias</h3>\n            <p>Identificadas por un c√≥digo de colores, limitan el flujo de corriente y son esenciales para controlar la intensidad en un circuito.</p>\n            <img src=\"/placeholder.svg?height=100&width=200\" alt=\"Imagen de Resistencias\" class=\"componente-img\">\n          </div>\n          <div class=\"componente-item\">\n            <h3>Capacitores</h3>\n            <p>Almacenan energ√≠a en un campo el√©ctrico, con la relaci√≥n Q = C ¬∑ V, y se usan en funciones de filtrado y temporizaci√≥n.</p>\n            <img src=\"/placeholder.svg?height=100&width=200\" alt=\"Imagen de Capacitores\" class=\"componente-img\">\n          </div>\n          <div class=\"componente-item\">\n            <h3>Inductores</h3>\n            <p>Almacenan energ√≠a en forma de campo magn√©tico y se utilizan en filtros, osciladores y convertidores de energ√≠a.</p>\n            <img src=\"/placeholder.svg?height=100&width=200\" alt=\"Imagen de Inductores\" class=\"componente-img\">\n          </div>\n          <div class=\"componente-item\">\n            <h3>Diodos</h3>\n            <p>Permiten el paso de corriente en un solo sentido, fundamentales en procesos de rectificaci√≥n y protecci√≥n de circuitos.</p>\n            <img src=\"/placeholder.svg?height=100&width=200\" alt=\"Imagen de Diodos\" class=\"componente-img\">\n          </div>\n          <div class=\"componente-item\">\n            <h3>Transistores</h3>\n            <p>Act√∫an como amplificadores o interruptores, siendo clave en la conmutaci√≥n y amplificaci√≥n de se√±ales en circuitos electr√≥nicos.</p>\n            <img src=\"/placeholder.svg?height=100&width=200\" alt=\"Imagen de Transistores\" class=\"componente-img\">\n          </div>\n          <div class=\"componente-item\">\n            <h3>Circuitos Integrados</h3>\n            <p>Integran m√∫ltiples componentes en un solo chip, permitiendo la miniaturizaci√≥n y la implementaci√≥n de funciones complejas en dispositivos modernos.</p>\n            <img src=\"/placeholder.svg?height=100&width=200\" alt=\"Imagen de Circuitos Integrados\" class=\"componente-img\">\n          </div>\n        </div>\n      ",
        "completed": false
      },
      {
        "id": "circuitos",
        "title": "Circuitos Anal√≥gicos y Digitales",
        "content": "\n        <div class=\"circuitos-container\">\n          <div class=\"circuito-tipo\">\n            <h3>Anal√≥gicos</h3>\n            <p>Operan con se√±ales continuas, ideales para aplicaciones como amplificadores de audio y sistemas de control.</p>\n            <div class=\"circuito-ejemplo\">\n              <img src=\"/placeholder.svg?height=150&width=300\" alt=\"Ejemplo de Circuito Anal√≥gico\" class=\"circuito-img\">\n              <button class=\"btn-simular\" onclick=\"simularCircuito('analogico')\">Simular Circuito</button>\n            </div>\n          </div>\n          <div class=\"circuito-tipo\">\n            <h3>Digitales</h3>\n            <p>Trabajan con niveles discretos (0 y 1), esenciales para la l√≥gica computacional y el procesamiento digital de se√±ales.</p>\n            <div class=\"circuito-ejemplo\">\n              <img src=\"/placeholder.svg?height=150&width=300\" alt=\"Ejemplo de Circuito Digital\" class=\"circuito-img\">\n              <button class=\"btn-simular\" onclick=\"simularCircuito('digital')\">Simular Circuito</button>\n            </div>\n          </div>\n          <p class=\"integracion-nota\">La integraci√≥n de circuitos anal√≥gicos y digitales permite conectar el mundo f√≠sico con sistemas de procesamiento digital para aplicaciones avanzadas.</p>\n        </div>\n      ",
        "completed": false
      },
      {
        "id": "material-extendido",
        "title": "Material Te√≥rico Extendido",
        "content": "\n        <div class=\"material-extendido-container\">\n          <div class=\"seccion\" id=\"introduccion\">\n            <h3>I. Introducci√≥n y Contexto Hist√≥rico</h3>\n            <p>Explora el surgimiento de la electr√≥nica desde los primeros experimentos con electricidad hasta la revoluci√≥n de los semiconductores y circuitos integrados.</p>\n            <button class=\"btn-expandir\" onclick=\"expandirSeccion('introduccion-detalle')\">Expandir</button>\n            <div id=\"introduccion-detalle\" class=\"detalle oculto\">\n              <p>Accede a una l√≠nea de tiempo interactiva con hitos hist√≥ricos y descubrimientos fundamentales que marcaron el desarrollo de la electr√≥nica.</p>\n            </div>\n          </div>\n          <div class=\"seccion\" id=\"fundamentos\">\n            <h3>II. Fundamentos de la Electr√≥nica</h3>\n            <ul>\n              <li><strong>Voltaje:</strong> Fuerza que impulsa el movimiento de electrones.</li>\n              <li><strong>Corriente:</strong> Medida del flujo de electrones en un conductor.</li>\n              <li><strong>Resistencia:</strong> Oposici√≥n al flujo de corriente, determinante en el dise√±o de circuitos.</li>\n            </ul>\n            <p>La comprensi√≥n de la Ley de Ohm y el c√°lculo de potencia es esencial para dise√±ar y analizar circuitos con precisi√≥n.</p>\n            <button class=\"btn-expandir\" onclick=\"expandirSeccion('fundamentos-detalle')\">Expandir</button>\n            <div id=\"fundamentos-detalle\" class=\"detalle oculto\">\n              <p>Utiliza nuestra calculadora interactiva para practicar con la Ley de Ohm y realizar c√°lculos de potencia en tiempo real.</p>\n            </div>\n          </div>\n          <div class=\"seccion\" id=\"componentes-aplicaciones\">\n            <h3>III. Componentes y Aplicaciones</h3>\n            <p>Descubre c√≥mo cada componente, desde resistencias hasta circuitos integrados, se integra en sistemas electr√≥nicos complejos y su aplicaci√≥n en diversas tecnolog√≠as.</p>\n            <button class=\"btn-expandir\" onclick=\"expandirSeccion('componentes-detalle')\">Expandir</button>\n            <div id=\"componentes-detalle\" class=\"detalle oculto\">\n              <p>Visualiza una galer√≠a interactiva que detalla el funcionamiento y aplicaciones de cada componente electr√≥nico.</p>\n            </div>\n          </div>\n          <div class=\"seccion\" id=\"aplicaciones-practicas\">\n            <h3>IV. Aplicaciones Pr√°cticas y Ejercicios</h3>\n            <p>Aplica tus conocimientos en ejercicios pr√°cticos, desde el c√°lculo de resistencias para LEDs hasta el dise√±o de amplificadores b√°sicos utilizando simuladores virtuales.</p>\n            <button class=\"btn-expandir\" onclick=\"expandirSeccion('aplicaciones-detalle')\">Expandir</button>\n            <div id=\"aplicaciones-detalle\" class=\"detalle oculto\">\n              <p>Accede a enlaces directos a simulaciones y ejercicios pr√°cticos que refuerzan tu aprendizaje.</p>\n            </div>\n          </div>\n          <div class=\"seccion\" id=\"evaluacion-recursos\">\n            <h3>V. Evaluaci√≥n y Recursos</h3>\n            <p>Complementa tu estudio con actividades evaluativas, tutoriales, documentos y herramientas interactivas para profundizar en cada tema.</p>\n            <button class=\"btn-expandir\" onclick=\"expandirSeccion('recursos-detalle')\">Expandir</button>\n            <div id=\"recursos-detalle\" class=\"detalle oculto\">\n              <p>Encuentra una lista curada de recursos adicionales para ampliar tus conocimientos en electr√≥nica.</p>\n            </div>\n          </div>\n        </div>\n      ",
        "completed": false
      }
    ],
    "activities": [
      {
        "id": "simulacion",
        "title": "Simulaci√≥n de Circuitos",
        "description": "Utiliza herramientas de simulaci√≥n interactivas como Tinkercad o Proteus para construir y analizar circuitos, verificando en tiempo real los c√°lculos te√≥ricos de voltaje y corriente.",
        "completed": false,
        "content": "\n        <div class=\"simulacion-container\">\n          <p>Selecciona una herramienta de simulaci√≥n para comenzar:</p>\n          <select id=\"simulador-select\">\n            <option value=\"tinkercad\">Tinkercad</option>\n            <option value=\"proteus\">Proteus</option>\n          </select>\n          <button class=\"btn-iniciar-simulacion\" onclick=\"iniciarSimulacion()\">Iniciar Simulaci√≥n</button>\n          <div id=\"simulacion-area\" class=\"simulacion-area\">\n            <!-- Espacio para cargar el simulador seleccionado -->\n          </div>\n        </div>\n      "
      },
      {
        "id": "identificacion",
        "title": "Identificaci√≥n de Componentes",
        "description": "Analiza diagramas y fotograf√≠as para identificar y clasificar componentes electr√≥nicos, reforzando tu conocimiento pr√°ctico con ejercicios interactivos.",
        "completed": false,
        "content": "\n        <div class=\"identificacion-container\">\n          <div class=\"componente-galeria\">\n            <!-- Galer√≠a de im√°genes de componentes -->\n            <img src=\"/placeholder.svg?height=100&width=100\" alt=\"Componente 1\" class=\"componente-img\" onclick=\"identificarComponente(0)\">\n            <img src=\"/placeholder.svg?height=100&width=100\" alt=\"Componente 2\" class=\"componente-img\" onclick=\"identificarComponente(1)\">\n            <img src=\"/placeholder.svg?height=100&width=100\" alt=\"Componente 3\" class=\"componente-img\" onclick=\"identificarComponente(2)\">\n          </div>\n          <div class=\"identificacion-respuesta\">\n            <p>Selecciona un componente y elige su nombre:</p>\n            <select id=\"componente-select\">\n              <option value=\"\">Selecciona...</option>\n              <option value=\"resistencia\">Resistencia</option>\n              <option value=\"capacitor\">Capacitor</option>\n              <option value=\"transistor\">Transistor</option>\n            </select>\n            <button class=\"btn-verificar\" onclick=\"verificarIdentificacion()\">Verificar</button>\n          </div>\n          <div id=\"identificacion-resultado\" class=\"resultado\"></div>\n        </div>\n      "
      }
    ],
    "quiz": [
      {
        "question": "¬øCu√°l es la unidad de medida del voltaje?",
        "options": ["Amperio", "Voltio", "Ohmio", "Vatio"],
        "correctAnswer": 1
      },
      {
        "question": "¬øQu√© componente se utiliza para almacenar carga el√©ctrica en un circuito?",
        "options": ["Resistencia", "Diodo", "Capacitor", "Transistor"],
        "correctAnswer": 2
      },
      {
        "question": "¬øQu√© ley relaciona el voltaje, la corriente y la resistencia?",
        "options": ["Ley de Faraday", "Ley de Ohm", "Ley de Coulomb", "Ley de Kirchhoff"],
        "correctAnswer": 1
      },
      {
        "question": "¬øCu√°l es la funci√≥n principal de un transistor?",
        "options": ["Almacenar energ√≠a", "Generar electricidad", "Amplificar o conmutar se√±ales", "Medir voltaje"],
        "correctAnswer": 2
      }
    ],
    "resources": [
      {
        "title": "Libro de Texto: Fundamentos de Electr√≥nica",
        "type": "pdf",
        "url": "https://ejemplo.com/fundamentos-electronica.pdf"
      },
      {
        "title": "Video Tutorial: Introducci√≥n a los Circuitos",
        "type": "video",
        "url": "https://ejemplo.com/intro-circuitos-video"
      },
      {
        "title": "Simulador Online de Circuitos",
        "type": "tool",
        "url": "https://www.tinkercad.com/circuits"
      }
    ]
  },
  {
  "title": "Herramientas y T√©cnicas de Reparaci√≥n: Del Principiante al Avanzado üöÄ",
  "description": "Disfruta de un curso interactivo con un dise√±o armonioso, animaciones envolventes y transiciones suaves que te sumergen en el mundo de la reparaci√≥n electr√≥nica. Cada m√≥dulo, actividad y recurso ha sido creado para ofrecerte una experiencia de aprendizaje intuitiva, visual y din√°mica, que combina teor√≠a y pr√°ctica de manera fluida.",
  "progress": 0,
  "completed": false,
  "unlocked": true,
  "estimatedTime": 4,
  "theme": "modern-animated",
  "advancedDesign": true,
  "notes": "üí° Avanza de manera progresiva, aprovechando cada recurso interactivo y animaci√≥n envolvente. El curso incorpora simulaciones en tiempo real, feedback visual y elementos din√°micos para que cada concepto se asimile de forma natural. Sigue los protocolos de seguridad y disfruta de cada transici√≥n: ¬°tu experiencia de aprendizaje ser√° tan inspiradora como efectiva!",
  "materials": [
    {
      "id": "fundamentos",
      "title": "Fundamentos de la Reparaci√≥n Electr√≥nica ‚ö°",
      "icon": "circuit-board",
      "content": "<section class=\"material-section animate__animated animate__fadeInUp\" data-aos=\"fade-up\" data-aos-duration=\"1000\">\n  <header class=\"componente-item\">\n    <h2>Fundamentos de la Reparaci√≥n Electr√≥nica ‚öôÔ∏è</h2>\n    <p class=\"subtitulo\">Inicia tu viaje con una introducci√≥n interactiva a los principios b√°sicos de la electr√≥nica.</p>\n  </header>\n  <article class=\"material-content\">\n    <p>Descubre conceptos esenciales a trav√©s de simuladores en tiempo real y animaciones envolventes:</p>\n    <ul>\n      <li><strong>Electricidad y Electr√≥nica:</strong> Comprende el voltaje, la corriente, la resistencia y la capacitancia con gr√°ficos interactivos.</li>\n      <li><strong>Componentes:</strong> Explora el funcionamiento de resistencias, condensadores, diodos y transistores mediante diagramas animados y tooltips din√°micos.</li>\n      <li><strong>Diagramas y PCBs:</strong> Manipula esquemas y placas de circuito impreso con laboratorios virtuales y tutoriales visuales.</li>\n    </ul>\n    <p>Una experiencia inmersiva que fusiona teor√≠a y pr√°ctica en un entorno 100% interactivo.</p>\n  </article>\n</section>",
      "completed": false
    },
    {
      "id": "diagnostico",
      "title": "Herramientas de Diagn√≥stico y Medici√≥n üîç",
      "icon": "tools",
      "content": "<section class=\"material-section animate__animated animate__fadeInUp\" data-aos=\"fade-up\" data-aos-delay=\"200\" data-aos-duration=\"1000\">\n  <header class=\"componente-item\">\n    <h2>Herramientas de Diagn√≥stico y Medici√≥n üîß</h2>\n    <p class=\"subtitulo\">Interacciona con herramientas avanzadas mediante demostraciones en vivo y simulaciones 3D.</p>\n  </header>\n  <article class=\"material-content\">\n    <p>Aprende a utilizar instrumentos esenciales para diagnosticar fallas:</p>\n    <ul>\n      <li><strong>Mult√≠metros:</strong> Realiza mediciones precisas de voltaje, corriente y resistencia con tutoriales interactivos.</li>\n      <li><strong>Osciloscopios:</strong> Visualiza formas de onda y detecta anomal√≠as con animaciones en 3D y simulaciones en tiempo real.</li>\n      <li><strong>Analizadores L√≥gicos:</strong> Experimenta con circuitos digitales y observa se√±ales mediante ejemplos pr√°cticos y din√°micos.</li>\n      <li><strong>C√°maras Termogr√°ficas:</strong> Visualiza el flujo t√©rmico y detecta puntos cr√≠ticos a trav√©s de simulaciones interactivas.</li>\n    </ul>\n    <p>Este m√≥dulo te permite aprender mediante feedback visual y sonoro en cada paso.</p>\n  </article>\n</section>",
      "completed": false
    },
    {
      "id": "soldadura",
      "title": "T√©cnicas de Soldadura: Convencional y SMD üî•",
      "icon": "soldering-iron",
      "content": "<section class=\"material-section animate__animated animate__fadeInUp\" data-aos=\"fade-up\" data-aos-delay=\"400\" data-aos-duration=\"1000\">\n  <header class=\"componente-item\">\n    <h2>T√©cnicas de Soldadura: Convencional y SMD üî•</h2>\n    <p class=\"subtitulo\">Perfecciona tu t√©cnica con demostraciones visuales y pr√°cticas interactivas adaptadas a cada tipo de componente.</p>\n  </header>\n  <article class=\"material-content\">\n    <p>Domina el arte de soldar a trav√©s de:</p>\n    <ul>\n      <li><strong>Preparaci√≥n del √Årea:</strong> Gu√≠as animadas para organizar y limpiar tu espacio de trabajo de forma eficiente.</li>\n      <li><strong>Uso del Flux:</strong> Aprende c√≥mo el flux mejora la conductividad mediante simulaciones y videos demostrativos.</li>\n      <li><strong>Control de Temperatura:</strong> Utiliza estaciones de soldadura con gr√°ficos en tiempo real que te muestran el control t√©rmico √≥ptimo.</li>\n      <li><strong>T√©cnicas SMD:</strong> Sigue tutoriales interactivos paso a paso para soldar componentes miniaturizados con precisi√≥n.</li>\n    </ul>\n    <p>Este m√≥dulo es tu puerta de entrada a la soldadura profesional, combinando videos, simulaciones y pr√°cticas guiadas.</p>\n  </article>\n</section>",
      "completed": false
    },
    {
      "id": "mantenimiento",
      "title": "Mantenimiento y Calibraci√≥n de Equipos üõ°Ô∏è",
      "icon": "maintenance",
      "content": "<section class=\"material-section animate__animated animate__fadeInUp\" data-aos=\"fade-up\" data-aos-delay=\"600\" data-aos-duration=\"1000\">\n  <header class=\"componente-item\">\n    <h2>Mantenimiento y Calibraci√≥n de Equipos üõ°Ô∏è</h2>\n    <p class=\"subtitulo\">Mant√©n tus herramientas en perfecto estado con pr√°cticas de mantenimiento preventivo y calibraci√≥n precisa.</p>\n  </header>\n  <article class=\"material-content\">\n    <p>Aprende t√©cnicas esenciales para:</p>\n    <ul>\n      <li><strong>Limpieza y Cuidado:</strong> Procedimientos animados y checklist interactivos para la limpieza y mantenimiento de equipos.</li>\n      <li><strong>Calibraci√≥n:</strong> Estrategias demostradas mediante simulaciones interactivas que garantizan mediciones exactas.</li>\n      <li><strong>Verificaci√≥n de Protocolos:</strong> M√©todos de inspecci√≥n presentados a trav√©s de videos y tutoriales din√°micos.</li>\n    </ul>\n    <p>Participa en laboratorios virtuales y ejercicios pr√°cticos para asegurar que tus herramientas funcionen siempre a su m√°ximo rendimiento.</p>\n  </article>\n</section>",
      "completed": false
    },
    {
      "id": "seguridad",
      "title": "Normativas de Seguridad y Procedimientos üîí",
      "icon": "safety-shield",
      "content": "<section class=\"material-section animate__animated animate__fadeInUp\" data-aos=\"fade-up\" data-aos-delay=\"800\" data-aos-duration=\"1000\">\n  <header class=\"componente-item\">\n    <h2>Normativas de Seguridad y Procedimientos de Trabajo üîí</h2>\n    <p class=\"subtitulo\">Garantiza un entorno de trabajo seguro con protocolos y normativas presentados de forma interactiva.</p>\n  </header>\n  <article class=\"material-content\">\n    <p>Explora las pr√°cticas esenciales para la seguridad:</p>\n    <ul>\n      <li><strong>Prevenci√≥n ESD:</strong> Aprende a proteger componentes sensibles mediante animaciones interactivas que muestran el uso correcto de equipos anti-ESD.</li>\n      <li><strong>Equipos de Protecci√≥n:</strong> Conoce los EPP recomendados a trav√©s de videos y demostraciones visuales que detallan su uso adecuado.</li>\n      <li><strong>Procedimientos de Emergencia:</strong> Simula escenarios de emergencia y aprende protocolos de acci√≥n mediante ejercicios interactivos.</li>\n      <li><strong>Normativas Internacionales:</strong> Accede a recursos y enlaces interactivos que te muestran los est√°ndares IEC, ANSI y m√°s.</li>\n    </ul>\n    <p>Con estudios de caso y evaluaciones interactivas, estar√°s preparado para identificar y mitigar riesgos de manera profesional.</p>\n  </article>\n</section>",
      "completed": false
    }
  ],
  "activities": [
    {
      "id": "simulacion-diagnostico",
      "title": "Simulaci√≥n Virtual de Diagn√≥stico üîé",
      "description": "Sum√©rgete en una experiencia interactiva donde diagnosticar√°s fallas en tiempo real utilizando herramientas avanzadas y feedback visual inmediato.",
      "completed": false,
      "content": "<section class=\"activity-section animate__animated animate__fadeIn\" data-aos=\"fade-in\" data-aos-duration=\"1000\">\n  <header class=\"componente-item\">\n    <h3>Simulaci√≥n Virtual de Diagn√≥stico üîé</h3>\n    <p class=\"subtitulo\">Pon a prueba tus habilidades en un entorno simulado, interactivo y lleno de feedback en tiempo real.</p>\n  </header>\n  <article class=\"activity-content\">\n    <p>Interact√∫a con un simulador avanzado para seleccionar herramientas, interpretar se√±ales y diagnosticar fallas, recibiendo retroalimentaci√≥n visual y sonora a cada paso.</p>\n    <button class=\"btn btn-primary btn-animated\" onclick=\"iniciarSimulacionDiagnostico()\">Iniciar Simulaci√≥n</button>\n    <div id=\"simulacion-diagnostico-area\" class=\"simulation-area\"></div>\n  </article>\n</section>",
      "completed": false
    },
    {
      "id": "practica-soldadura",
      "title": "Pr√°ctica Guiada de Soldadura en Placa Real üî•",
      "description": "Participa en una pr√°ctica interactiva y visualmente estimulante donde soldar√°s en un entorno que simula una placa real, recibiendo feedback en tiempo real.",
      "completed": false,
      "content": "<section class=\"activity-section animate__animated animate__fadeIn\" data-aos=\"fade-in\" data-aos-delay=\"150\" data-aos-duration=\"1000\">\n  <header class=\"componente-item\">\n    <h3>Pr√°ctica Guiada de Soldadura en Placa Real üî•</h3>\n    <p class=\"subtitulo\">Siente la experiencia de trabajar en una placa real con gu√≠as animadas e interacciones en tiempo real.</p>\n  </header>\n  <article class=\"activity-content\">\n    <p>Sigue paso a paso las instrucciones animadas y participa en simulaciones 3D que te permitir√°n soldar con precisi√≥n, mientras recibes feedback instant√°neo para perfeccionar tu t√©cnica.</p>\n    <button class=\"btn btn-primary btn-animated\" onclick=\"iniciarPracticaSoldadura()\">Iniciar Pr√°ctica</button>\n    <div id=\"practica-soldadura-area\" class=\"practice-area\"></div>\n  </article>\n</section>",
      "completed": false
    },
    {
      "id": "analisis-fallas",
      "title": "An√°lisis Comparativo y Estudio de Casos de Fallas üìä",
      "description": "Participa en un an√°lisis colaborativo interactivo de casos reales para desarrollar un enfoque cr√≠tico y anal√≠tico en la resoluci√≥n de problemas.",
      "completed": false,
      "content": "<section class=\"activity-section animate__animated animate__fadeIn\" data-aos=\"fade-in\" data-aos-delay=\"300\" data-aos-duration=\"1000\">\n  <header class=\"componente-item\">\n    <h3>An√°lisis Comparativo y Estudio de Casos de Fallas üìä</h3>\n    <p class=\"subtitulo\">Comparte ideas y soluciones en un entorno colaborativo que fomenta el pensamiento cr√≠tico y la innovaci√≥n.</p>\n  </header>\n  <article class=\"activity-content\">\n    <p>Investiga, analiza y discute casos reales de fallas, elaborando propuestas de mejora en un entorno interactivo y colaborativo.</p>\n    <button class=\"btn btn-primary btn-animated\" onclick=\"iniciarAnalisisFallas()\">Iniciar An√°lisis</button>\n    <div id=\"analisis-fallas-area\" class=\"analysis-area\"></div>\n  </article>\n</section>",
      "completed": false
    }
  ],
  "quiz": [
    {
      "question": "¬øCu√°l es la funci√≥n principal de un mult√≠metro en la reparaci√≥n electr√≥nica?",
      "options": [
        "Medir la intensidad de la luz",
        "Diagnosticar fallas en software",
        "Medir voltaje, corriente y resistencia",
        "Almacenar datos de los circuitos"
      ],
      "correctAnswer": 2
    },
    {
      "question": "¬øQu√© t√©cnica de soldadura se utiliza para componentes de montaje superficial (SMD)?",
      "options": [
        "Soldadura por puntos",
        "Soldadura SMD",
        "Soldadura TIG",
        "Soldadura MIG"
      ],
      "correctAnswer": 1
    },
    {
      "question": "¬øCu√°l es una pr√°ctica recomendada para evitar da√±os por descargas electrost√°ticas (ESD)?",
      "options": [
        "Utilizar guantes aislantes y pulseras anti-ESD",
        "Trabajar sin protecci√≥n para mayor destreza",
        "Ignorar las recomendaciones",
        "Manipular componentes √∫nicamente con herramientas met√°licas"
      ],
      "correctAnswer": 0
    },
    {
      "question": "¬øPor qu√© es esencial calibrar regularmente las herramientas de medici√≥n?",
      "options": [
        "Para mejorar la apariencia de los equipos",
        "Para asegurar la precisi√≥n y confiabilidad de las mediciones",
        "Para aumentar la velocidad de diagn√≥stico sin importar la exactitud",
        "Para reducir el consumo el√©ctrico de los dispositivos"
      ],
      "correctAnswer": 1
    }
  ],
  "resources": [
    {
      "title": "Manual de Reparaci√≥n Electr√≥nica üìò",
      "type": "pdf",
      "url": "https://ejemplo.com/manual-reparacion.pdf"
    },
    {
      "title": "Video Tutorial: T√©cnicas de Soldadura üé•",
      "type": "video",
      "url": "https://ejemplo.com/tecnica-soldadura-video"
    },
    {
      "title": "Simulador Online de Diagn√≥stico üñ•Ô∏è",
      "type": "tool",
      "url": "https://ejemplo.com/simulador-diagnostico"
    }
  ]
},
         {
  "title": "üîß Diagn√≥stico y Reparaci√≥n de Celulares",
  "description": "Curso avanzado de diagn√≥stico y reparaci√≥n de dispositivos m√≥viles. Este curso se adapta a todos los niveles, promoviendo un aprendizaje activo y colaborativo mediante simulaciones, debates y actividades pr√°cticas.",
  "materials": [
    {
      "title": "üîã Falla en la Bater√≠a",
      "content": "<p><strong>Descripci√≥n:</strong> An√°lisis de problemas en bater√≠as recargables (Li-ion/LiPo) con enfoque en par√°metros el√©ctricos y t√©rmicos.</p><h5>Descarga R√°pida</h5><p><strong>Definici√≥n:</strong> P√©rdida acelerada de capacidad √∫til (mAh) debido a degradaci√≥n qu√≠mica, ciclos de carga excesivos o fallas en el circuito de gesti√≥n (BMS).</p><p><strong>Ejemplos:</strong></p><ul><li>Tel√©fono que se apaga al 30% de carga (voltaje real &lt; 3.4V bajo carga vs. 3.7V esperado).</li><li>Bater√≠a de laptop con 2,000 mAh medidos vs. 4,000 mAh declarados (50% degradaci√≥n).</li></ul><p><strong>Mediciones:</strong></p><ul><li><em>Normal:</em> Voltaje en reposo: 3.7V - 4.2V, Resistencia interna: &lt; 100 mŒ©, Capacidad: ¬±5% de la especificada.</li><li><em>Falla:</em> Voltaje bajo carga: &lt; 3.2V, Resistencia interna: &gt; 200 mŒ©, Capacidad: &lt; 80% del nominal.</li></ul><p><strong>Procedimiento:</strong></p><ol><li>Medir voltaje en reposo con mult√≠metro digital (conectar puntas a terminales (+) y (-)). Resultado esperado: 3.7V - 4.2V. Si falla, reemplazar bater√≠a.</li><li>Calcular capacidad real con analizador de bater√≠as (ej: BLT) realizando una descarga controlada a 0.5C. Resultado esperado: Capacidad ‚â• 80% del valor nominal. Si falla, reemplazar bater√≠a o recalibrar el BMS.</li></ol><h5>Sobrecalentamiento</h5><p><strong>Definici√≥n:</strong> Temperatura superficial &gt; 45¬∞C en operaci√≥n normal, causada por cortocircuitos internos, sobrecarga o mala disipaci√≥n.</p><p><strong>Ejemplos:</strong></p><ul><li>Bater√≠a que alcanza 60¬∞C durante carga (vs. m√°ximo recomendado de 45¬∞C).</li><li>Hinchaz√≥n visible por generaci√≥n de gases (electrolito descompuesto).</li></ul><p><strong>Mediciones:</strong></p><ul><li><em>Normal:</em> Temperatura durante carga: 25¬∞C - 40¬∞C, Corriente de carga: 0.5C - 1C.</li><li><em>Falla:</em> Temperatura: &gt; 50¬∞C, Corriente de fuga: &gt; 50 mA en reposo.</li></ul><p><strong>Procedimiento:</strong></p><ol><li>Medir la temperatura con term√≥metro IR (apuntar al centro de la bater√≠a). Resultado esperado: &lt; 45¬∞C en carga m√°xima. Si falla, revisar circuito y reemplazar bater√≠a.</li><li>Medir la corriente de fuga con un mult√≠metro en serie (conectar entre terminal (-) y el dispositivo). Resultado esperado: &lt; 5 mA. Si falla, reemplazar el BMS o aislar cortocircuitos.</li></ol>"
    },
    {
      "title": "üì± Problemas en la Pantalla",
      "content": "<p><strong>Descripci√≥n:</strong> Diagn√≥stico de fallas en pantallas LCD/OLED y sus componentes asociados.</p><h5>P√≠xeles Muertos</h5><p><strong>Definici√≥n:</strong> Puntos que no emiten luz (negros o blancos fijos) debido a fallas en transistores TFT o conexiones rotas.</p><p><strong>Ejemplos:</strong></p><ul><li>Zona de 5x5 p√≠xeles negros en la esquina superior derecha.</li><li>L√≠nea vertical blanca por fallo en el flex cable.</li></ul><p><strong>Mediciones:</strong></p><ul><li><em>Normal:</em> Continuidad en flex cable: 0 Œ©, Voltaje en driver LCD: 3.3V ¬±5%.</li><li><em>Falla:</em> Resistencia en flex cable: &gt; 1 Œ©, Voltaje en driver LCD: Menor a 3.0V o inestable.</li></ul><p><strong>Procedimiento:</strong></p><ol><li>Ejecutar un test de p√≠xeles (app o color s√≥lido). Resultado esperado: Pantalla uniforme sin puntos. Si se detectan m√°s de 3 p√≠xeles muertos, reemplazar la pantalla.</li><li>Medir la continuidad en el flex cable con un mult√≠metro en modo continuidad. Resultado esperado: Beep continuo (0 Œ©). Si falla, reemplazar o resoldar el cable.</li></ol><h5>Pantalla Congelada</h5><p><strong>Definici√≥n:</strong> Interrupci√≥n en la se√±al de video por fallas en la GPU, conectores o software.</p><p><strong>Ejemplos:</strong></p><ul><li>Pantalla que muestra una imagen est√°tica tras una ca√≠da (posible desconexi√≥n de la GPU).</li><li>Artefactos gr√°ficos causados por drivers corruptos.</li></ul><p><strong>Mediciones:</strong></p><ul><li><em>Normal:</em> Se√±al LVDS: 1.2V - 3.3V estable, Frecuencia de refresco: 60 Hz ¬±2%.</li><li><em>Falla:</em> Se√±al LVDS: 0V o con ruido, Frecuencia inestable o fuera de rango.</li></ul><p><strong>Procedimiento:</strong></p><ol><li>Medir la se√±al LVDS en el conector con un osciloscopio digital. Resultado esperado: Se√±al cuadrada estable. Si falla, revisar conexiones o la tarjeta gr√°fica.</li><li>Actualizar o reinstalar los drivers mediante software de diagn√≥stico. Resultado esperado: Versi√≥n compatible. Si falla, restaurar el sistema o flashear la BIOS.</li></ol>"
    },
    {
      "title": "üîå Conectores y Circuitos Internos",
      "content": "<p><strong>Descripci√≥n:</strong> An√°lisis de fallas en interconexiones y PCB.</p><h5>Da√±o por Humedad</h5><p><strong>Definici√≥n:</strong> Corrosi√≥n en pistas o componentes por exposici√≥n a l√≠quidos, identificable por residuos verdes o blancos.</p><p><strong>Ejemplos:</strong></p><ul><li>Tel√©fono mojado con corrosi√≥n en el conector de carga.</li><li>Cortocircuito entre pistas adyacentes en la PCB.</li></ul><p><strong>Mediciones:</strong></p><ul><li><em>Normal:</em> Resistencia entre pistas: &gt; 1 MŒ©, Voltaje en componentes conforme al dise√±o.</li><li><em>Falla:</em> Resistencia entre pistas: &lt; 10 kŒ©, Voltaje en componentes: 0V.</li></ul><p><strong>Procedimiento:</strong></p><ol><li>Realizar inspecci√≥n visual con lupa 10x. Resultado esperado: PCB limpio y pistas intactas. Si hay corrosi√≥n, limpiar con alcohol isoprop√≠lico y reparar las pistas.</li><li>Medir la resistencia entre pistas con un mult√≠metro en modo Œ©. Resultado esperado: &gt; 1 MŒ© sin cortocircuitos. Si falla, aislar con barniz o reemplazar la PCB.</li></ol><h5>Puerto de Carga Defectuoso</h5><p><strong>Definici√≥n:</strong> Falla mec√°nica o el√©ctrica que impide una conexi√≥n estable, debido a pines oxidados o soldaduras rotas.</p><p><strong>Ejemplos:</strong></p><ul><li>Puerto USB-C con movimiento excesivo por soldaduras desprendidas.</li><li>Voltaje irregular en el pin VBUS (de 5V esperado a 2V).</li></ul><p><strong>Mediciones:</strong></p><ul><li><em>Normal:</em> Resistencia de contacto: &lt; 0.5 Œ©, Voltaje en VBUS: 5V ¬±5%.</li><li><em>Falla:</em> Resistencia de contacto: &gt; 2 Œ©, Voltaje inestable o menor a 4.5V.</li></ul><p><strong>Procedimiento:</strong></p><ol><li>Medir el voltaje en el pin VBUS con un mult√≠metro en DC (conectar la punta a VBUS y la otra a GND). Resultado esperado: 5.0V ¬±0.25V. Si falla, revisar o reemplazar el puerto.</li><li>Verificar la resistencia de contacto con un mult√≠metro en modo Œ©. Resultado esperado: &lt; 0.5 Œ©. Si falla, limpiar o resoldar las conexiones.</li></ol>"
    },
    {
      "title": "M√≥dulo 1 - Herramientas y T√©cnicas de Diagn√≥stico",
      "content": "<p><strong>Descripci√≥n:</strong> Desarrollo de competencias en el uso de instrumentos de medici√≥n y an√°lisis para diagn√≥stico electr√≥nico.</p><h5>Fundamentos Te√≥ricos</h5><p><strong>Objetivo General:</strong> Desarrollar habilidades en el uso de instrumentos de medici√≥n para diagn√≥stico electr√≥nico.</p><p><strong>Enfoque Pedag√≥gico:</strong> Aprendizaje basado en proyectos y metodolog√≠a STEM.</p><p><strong>Taxonom√≠a de Bloom aplicada:</strong> Recordar, Aplicar, Analizar, Evaluar y Crear.</p><h5>Secci√≥n 1 - Mult√≠metro</h5><p><strong>Teor√≠a:</strong> Instrumento de medici√≥n el√©ctrica multifunci√≥n (V, A, Œ©, continuidad) basado en la Ley de Ohm y el efecto Hall. Tipos: Anal√≥gico (aguja) y Digital (pantalla LCD).</p><p><strong>Ejemplo Pr√°ctico:</strong> Medir voltaje en una bater√≠a de 9V y resistencia en un circuito paralelo. Pasos: Calibrar, seleccionar el rango adecuado, conectar (Negro a COM, rojo a VŒ©) y comparar el valor medido con la tolerancia. Errores comunes: Medir en circuito energizado o usar rango incorrecto.</p><p><strong>Resultados Esperados:</strong> Precisi√≥n del 98% en mediciones y tabla comparativa de valores te√≥ricos vs. reales.</p><h5>Secci√≥n 2 - Osciloscopio</h5><p><strong>Teor√≠a:</strong> Instrumento para visualizar se√±ales el√©ctricas en el dominio temporal. Par√°metros: Ancho de banda, tasa de muestreo y resoluci√≥n vertical. F√≥rmulas: Frecuencia = 1/Periodo y Vp-p = V/div √ó n√∫mero de divisiones.</p><p><strong>Casos de Estudio:</strong></p><ul><li><strong>Caso 1:</strong> Onda cuadrada distorsionada en microcontrolador. Diagn√≥stico: Falta de resistencia pull-up. Soluci√≥n: A√±adir resistor de 10kŒ© a Vcc.</li><li><strong>Caso 2:</strong> Rizado en fuente de alimentaci√≥n. Diagn√≥stico: Capacitor desgastado. Soluci√≥n: Reemplazar capacitor de 1000ŒºF.</li></ul><p><strong>Metodolog√≠a de An√°lisis:</strong> Ajustar la base de tiempo, calibrar verticalmente, utilizar triggers y realizar mediciones autom√°ticas.</p><h5>Evaluaci√≥n Integradora</h5><p><strong>Proyecto Final:</strong> Dise√±ar una estaci√≥n de diagn√≥stico port√°til usando las herramientas aprendidas.</p><p><strong>R√∫brica:</strong> Precisi√≥n t√©cnica (40%), metodolog√≠a de soluci√≥n (30%), documentaci√≥n profesional (20%) e innovaci√≥n (10%).</p>"
    },
    {
      "title": "M√≥dulo 2 - Interpretaci√≥n de Diagramas",
      "content": "<p><strong>Descripci√≥n:</strong> Profundizaci√≥n en el an√°lisis de diagramas el√©ctricos mediante simbolog√≠a y normativas.</p><h5>Marco Te√≥rico</h5><p><strong>Simbolog√≠a Electr√≥nica:</strong></p><ul><li><strong>Componentes Pasivos:</strong> Resistencia (rect√°ngulo con terminales), Capacitor (l√≠neas paralelas, polarizado vs. no polarizado).</li><li><strong>Componentes Activos:</strong> Transistor BJT (flecha en el emisor, NPN/PNP), Microcontrolador (cuadrado con pines etiquetados).</li></ul><p><strong>Normativas:</strong> IEEE 315, IEC 60617.</p><p><strong>Teor√≠a de Grafos:</strong> An√°lisis de nodos y mallas seg√∫n las Leyes de Kirchhoff.</p><h5>Ejercicio Guiado</h5><p><strong>Diagrama de Placa Base:</strong> Pasos para identificar bloques funcionales (alimentaci√≥n, E/S, procesamiento), trazar rutas cr√≠ticas (reloj del sistema, buses de datos) y relacionar la informaci√≥n con la lista de materiales. Herramienta: Simulador de flujo de corriente con visualizaci√≥n t√©rmica.</p><p><strong>Error T√≠pico:</strong> Confusi√≥n entre el s√≠mbolo de tierra digital y el anal√≥gico.</p><h5>Estrategias Did√°cticas</h5><p><strong>Mapa Conceptual:</strong> Relacionar s√≠mbolos con sus funciones.</p><p><strong>Aprendizaje por Descubrimiento:</strong> Reconstruir diagramas a partir de prototipos f√≠sicos.</p><p><strong>Evaluaci√≥n Formativa:</strong> Pruebas de emparejamiento y ejercicios de completar diagramas.</p><h5>Resultados de Aprendizaje</h5><p><strong>Nivel B√°sico:</strong> Identificar al menos el 90% de los componentes en diagramas simples.</p><p><strong>Nivel Avanzado:</strong> Elaborar esquemas con software CAD.</p><p><strong>Competencia Transversal:</strong> Fomentar el trabajo colaborativo en documentos t√©cnicos.</p>"
    },
    {
      "title": "S√≠ntesis Pedag√≥gica",
      "content": "<p><strong>Descripci√≥n:</strong> Consolidaci√≥n de aprendizajes y estrategias para un aprendizaje significativo.</p><p><strong>Teor√≠a del Aprendizaje Significativo:</strong> Conectar nuevos conceptos con conocimientos previos en f√≠sica y matem√°ticas.</p><p><strong>Andamiaje Educativo:</strong></p><ul><li>Simuladores virtuales como apoyo inicial.</li><li>Pr√°cticas guiadas con instrumentos reales.</li><li>Proyectos aut√≥nomos supervisados.</li></ul><p><strong>Evaluaci√≥n Competencial:</strong></p><ul><li><strong>Saber:</strong> Ex√°menes te√≥ricos de opci√≥n m√∫ltiple.</li><li><strong>Saber Hacer:</strong> Listas de cotejo para procedimientos t√©cnicos.</li><li><strong>Saber Ser:</strong> R√∫bricas para valorar el trabajo en equipo y la √©tica profesional.</li></ul>"
    }
  ],
  "activities": [
    {
      "title": "üîß Caso Pr√°ctico Integral de Diagn√≥stico",
      "description": "<h2>üì± An√°lisis de Fallas Compuestas</h2><p>En esta actividad, el alumno enfrenta un caso real con m√∫ltiples fallas para diagnosticar:</p><ul><li><strong>Descarga R√°pida y Sobrecalentamiento:</strong> Evaluaci√≥n conjunta de bater√≠a y circuitos de carga.</li><li><strong>Problemas en Encendido y Conectividad:</strong> Diagn√≥stico de fallas en botones, puertos y conexiones internas.</li></ul><h2>üõ†Ô∏è Uso de Herramientas e Informe T√©cnico</h2><ul><li><strong>Simulador Avanzado:</strong> Integra mediciones de mult√≠metro, pruebas JTAG y an√°lisis con osciloscopio.</li><li><strong>Informe T√©cnico Detallado:</strong> Justifica cada paso del diagn√≥stico y propone soluciones fundamentadas.</li></ul>"
    },
    {
      "title": "üíª Taller de An√°lisis con Software de Diagn√≥stico",
      "description": "<h2>üõ†Ô∏è Configuraci√≥n y Uso del Software Especializado</h2><p>Actividad pr√°ctica que gu√≠a al alumno en la instalaci√≥n, configuraci√≥n y uso de software de diagn√≥stico en un entorno virtual:</p><ul><li><strong>Instalaci√≥n y Personalizaci√≥n:</strong> Tutorial interactivo para ajustes avanzados.</li><li><strong>Simulaciones de Pruebas de Hardware:</strong> Ejercicios para medir par√°metros cr√≠ticos y analizar resultados.</li></ul><h2>üéÆ Gamificaci√≥n y Colaboraci√≥n Digital</h2><ul><li><strong>Desaf√≠os Interactivos:</strong> Actividades gamificadas que premian la precisi√≥n y rapidez.</li><li><strong>Foro de Discusi√≥n:</strong> Espacio para debatir dudas y compartir hallazgos.</li></ul>"
    }
  ],
  "quiz": [
    {
      "question": "‚ùì ¬øCu√°l es un s√≠ntoma t√≠pico de fallo en la bater√≠a de un celular?",
      "options": [
        "üî• Sobrecalentamiento",
        "üîã Descarga r√°pida",
        "‚ùÑÔ∏è Pantalla congelada",
        "üì¢ Mal funcionamiento del altavoz"
      ],
      "correctAnswer": 1,
      "feedback": "‚úÖ La descarga r√°pida indica p√©rdida de capacidad o fallo interno en la bater√≠a. <a href='#'>Ir al simulador</a>."
    },
    {
      "question": "‚ùì ¬øQu√© herramienta permite analizar la comunicaci√≥n interna en un celular?",
      "options": [
        "üîß Mult√≠metro",
        "üíª Software de an√°lisis",
        "üíæ JTAG",
        "üìä Analizador l√≥gico"
      ],
      "correctAnswer": 2,
      "feedback": "‚úÖ El JTAG permite la comunicaci√≥n directa con el microcontrolador para detectar errores en el firmware. <a href='#'>Ver tutorial</a>."
    },
    {
      "question": "‚ùì ¬øQu√© recurso es fundamental para interpretar correctamente un diagrama el√©ctrico?",
      "options": [
        "üìñ Glosario visual de s√≠mbolos",
        "üîß Simulador de circuitos",
        "üíª Software de diagn√≥stico",
        "üìä Reporte interactivo"
      ],
      "correctAnswer": 0,
      "feedback": "‚úÖ El glosario visual de s√≠mbolos facilita la identificaci√≥n y an√°lisis de fallas. <a href='#'>Explorar glosario</a>."
    }
  ],
  "notes": "",
  "complementaryNotes": "",
  "completed": false
},
          {
            title: 'Reparaci√≥n Avanzada y Microssoldadura',
            description: 'T√©cnicas avanzadas de reparaci√≥n y reemplazo de componentes a nivel de placa.',
            materials: [
              { title: 'Microsoldadura', content: 'T√©cnicas de microsoldadura para componentes BGA y QFN.' },
              { title: 'Reparaci√≥n de Placas', content: 'Diagn√≥stico y reparaci√≥n de cortocircuitos y pistas da√±adas.' }
            ],
            activities: [
              { title: 'Pr√°ctica 4', description: 'Realizar microsoldadura en una placa de pr√°ctica.' }
            ],
            quiz: [
              {
                question: '¬øQu√© significa BGA en el contexto de microsoldadura?',
                options: ['Bola de Goma Adhesiva', 'Arreglo de Rejilla de Bolas', 'An√°lisis de Ganancia B√°sica', 'Acelerador de Gr√°ficos B√°sico'],
                correctAnswer: 1
              },
              {
                question: '¬øQu√© herramienta es esencial para la microsoldadura?',
                options: ['Martillo', 'Estaci√≥n de aire caliente', 'Destornillador', 'Pinzas'],
                correctAnswer: 1
              }
            ],
            completed: false,
            unlocked: false,
            estimatedTime: 5,
            notes: ''
          },
          {
            title: 'Reparaci√≥n de Pantallas y Displays',
            description: 'T√©cnicas para diagnosticar y reparar problemas en pantallas de celulares.',
            materials: [
              { title: 'Tipos de Pantallas', content: 'LCD, OLED, AMOLED: diferencias y caracter√≠sticas.' },
              { title: 'Problemas Comunes', content: 'Pixeles muertos, l√≠neas, problemas de retroiluminaci√≥n.' }
            ],
            activities: [
              { title: 'Pr√°ctica 5', description: 'Reemplazo de pantalla en un modelo de pr√°ctica.' }
            ],
            quiz: [
              {
                question: '¬øQu√© tipo de pantalla no requiere retroiluminaci√≥n?',
                options: ['LCD', 'OLED', 'TFT', 'IPS'],
                correctAnswer: 1
              },
              {
                question: '¬øCu√°l es una causa com√∫n de l√≠neas en la pantalla?',
                options: ['Bater√≠a baja', 'Conexi√≥n suelta', 'Sobrecalentamiento', 'Virus'],
                correctAnswer: 1
              }
            ],
            completed: false,
            unlocked: false,
            estimatedTime: 4,
            notes: ''
          },
          {
            title: 'Reparaci√≥n de Problemas de Bater√≠a',
            description: 'Diagn√≥stico y soluci√≥n de problemas relacionados con la bater√≠a y carga.',
            materials: [
              { title: 'Tipos de Bater√≠as', content: 'Li-Ion, Li-Po: caracter√≠sticas y precauciones.' },
              { title: 'Circuitos de Carga', content: 'Componentes y funcionamiento del sistema de carga.' }
            ],
            activities: [
              { title: 'Pr√°ctica 6', description: 'Diagn√≥stico y reemplazo de bater√≠a.' }
            ],
            quiz: [
              {
                question: '¬øCu√°l es el voltaje t√≠pico de una bater√≠a de celular?',
                options: ['1.5V', '3.7V', '9V', '12V'],
                correctAnswer: 1
              },
              {
                question: '¬øQu√© componente protege la bater√≠a contra sobrecarga?',
                options: ['Resistencia', 'Capacitor', 'Circuito de protecci√≥n', 'Diodo'],
                correctAnswer: 2
              }
            ],
            completed: false,
            unlocked: false,
            estimatedTime: 3,
            notes: ''
          },
          {
            title: 'Reparaci√≥n de Problemas de Software',
            description: 'Soluci√≥n de problemas de software y actualizaci√≥n de sistemas operativos.',
            materials: [
              { title: 'Sistemas Operativos M√≥viles', content: 'Android, iOS: caracter√≠sticas y diferencias.' },
              { title: 'Herramientas de Diagn√≥stico', content: 'Software para identificar problemas de sistema.' }
            ],
            activities: [
              { title: 'Pr√°ctica 7', description: 'Actualizaci√≥n de sistema operativo y resoluci√≥n de problemas comunes.' }
            ],
            quiz: [
              {
                question: '¬øQu√© es el "bootloop" en un celular?',
                options: ['Un virus', 'Un reinicio continuo', 'Una aplicaci√≥n', 'Un tipo de bater√≠a'],
                correctAnswer: 1
              },
              {
                question: '¬øQu√© modo se usa para diagnosticar problemas de software en Android?',
                options: ['Modo avi√≥n', 'Modo seguro', 'Modo silencioso', 'Modo de ahorro de energ√≠a'],
                correctAnswer: 1
              }
            ],
            completed: false,
            unlocked: false,
            estimatedTime: 4,
            notes: ''
          }
        ],
        forumPosts: [
          { title: 'Duda sobre capacitores', content: '¬øAlguien puede explicar la diferencia entre capacitores electrol√≠ticos y cer√°micos?', author: 'Juan', date: '2023-05-15' },
          { title: 'Tip para soldadura SMD', content: 'He descubierto que usar flux hace mucho m√°s f√°cil la soldadura de componentes SMD.', author: 'Mar√≠a', date: '2023-05-16' }
        ],
        glossaryTerms: [
          { term: 'SMD', definition: 'Surface Mount Device (Dispositivo de Montaje Superficial): Componentes electr√≥nicos dise√±ados para ser montados directamente sobre la superficie de una placa de circuito impreso.' },
          { term: 'BGA', definition: 'Ball Grid Array (Matriz de Rejilla de Bolas): Tipo de empaquetado de circuitos integrados que utiliza una matriz de bolas de soldadura para las conexiones el√©ctricas y mec√°nicas a la placa.' },
          { term: 'Flux', definition: 'Sustancia qu√≠mica que se utiliza en el proceso de soldadura para limpiar y mejorar el flujo del metal de soldadura.' },
          { term: 'JTAG', definition: 'Joint Test Action Group: Interfaz de depuraci√≥n utilizada para probar PCBs y chips de memoria.' },
          { term: 'ESD', definition: 'Electrostatic Discharge (Descarga Electrost√°tica): Fen√≥meno que puede da√±ar componentes electr√≥nicos sensibles.' }
        ]
      },
      computed: {

  currentClassData() {
    return this.classes[this.currentClass];
  },

        completedClasses() {
          return this.classes.filter(c => c.completed).length;
        },
        totalEstimatedTime() {
          return this.classes.reduce((total, clase) => total + clase.estimatedTime, 0);
        },
        // Propiedad computada para acceder de forma segura a la clase seleccionada
        currentClassData() {
          return this.classes[this.currentClass] || { 
            title: '', 
            description: '', 
            materials: [], 
            activities: [], 
            quiz: [], 
            completed: false, 
            unlocked: false, 
            estimatedTime: 0, 
            notes: '',
          };
        }
      },
      methods: {
        selectClass(index) {
          if (this.classes[index] && this.classes[index].unlocked) {
            this.currentClass = index;
            this.currentView = 'course';
            this.resetQuiz();
          }
        },
        selectAnswer(index) {
          this.selectedAnswer = index;
        },
        checkAnswer() {
          if (this.selectedAnswer !== null) {
            this.showAnswers = true;
            if (this.selectedAnswer === this.currentClassData.quiz[this.currentQuestionIndex].correctAnswer) {
              this.quizScore++;
            }
          }
        },
        nextQuestion() {
          this.currentQuestionIndex++;
          this.showAnswers = false;
          this.selectedAnswer = null;
        },


        resetQuiz() {
          this.currentQuestionIndex = 0;
          this.quizScore = 0;
          this.showAnswers = false;
          this.selectedAnswer = null;
        },
        toggleDarkMode() {
          this.isDarkMode = !this.isDarkMode;
          document.body.classList.toggle('dark-mode', this.isDarkMode);
        },
        getClassProgress(index) {
          if (index < 0 || index >= this.classes.length) return 0;
          const clase = this.classes[index];
          if (!clase) return 0;
          if (clase.completed) return 100;
          if (!clase.unlocked) return 0;
          const totalQuestions = (clase.quiz && clase.quiz.length) || 0;
          const answeredQuestions = index === this.currentClass ? this.currentQuestionIndex : 0;
          return totalQuestions > 0 ? Math.round((answeredQuestions / totalQuestions) * 100) : 0;
        },
        searchContent() {
          console.log('Buscando:', this.searchQuery);
        },
        runSimulation() {
          const canvas = document.getElementById('virtualLab');
          const ctx = canvas.getContext('2d');
          console.log('Ejecutando simulaci√≥n');
        },
        addForumPost() {
          const newPost = {
            title: 'Nueva Publicaci√≥n',
            content: 'Contenido de la nueva publicaci√≥n',
            author: 'Usuario',
            date: new Date().toISOString().split('T')[0]
          };
          this.forumPosts.push(newPost);
        },
        submitFeedback() {
          console.log('Feedback enviado:', this.feedback);
          this.feedback = '';
        },
        
        updateProgressChart() {
          this.$nextTick(() => {
            const chartElement = document.getElementById('progressChart');
            if (chartElement) {
              const ctx = chartElement.getContext('2d');
              new Chart(ctx, {
                type: 'bar',
                data: {
                  labels: this.classes.map(c => c.title),
                  datasets: [{
                    label: 'Progreso por Clase',
                    data: this.classes.map((clase, index) => this.getClassProgress(index)),
                    backgroundColor: 'rgba(75, 192, 192, 0.6)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                  }]
                },
                options: {
                  scales: {
                    y: {
                      beginAtZero: true,
                      max: 100
                    }
                  }
                }
              });
            }
          });
        },
        downloadCertificate() {
          console.log('Descargando certificado');
        },

   // Carga los datos del estudiante desde sessionStorage

    // Verifica que el curso est√© pagado (se asume que la tabla "compras" y el campo "estado" existen)
    async checkCoursePayment() {
      if (this.student && this.student.id) {
        const { data, error } = await supabase
          .from("compras")
          .select("estado")
          .eq("alumno_id", this.student.id)
          .eq("estado", "pagado");
        if (error) {
          console.error("Error verificando la compra:", error);
          window.location.href = "login.html";
        } else if (!data || data.length === 0) {
          window.location.href = "login.html";
        }
      } else {
        window.location.href = "login.html";
      }
    },


    // Guarda el avance del curso en la base de datos
    async saveCourseProgress() {
      if (this.student && this.student.id) {
        const moduloActual = this.currentClass + 1;
        const porcentajeCompletado = this.progress;
        const mensajeMotivacional = "¬°Excelente trabajo, sigue avanzando!";
        await saveProgress(this.student.id, moduloActual, porcentajeCompletado, mensajeMotivacional);
      }
    },
        getClassProgress(index) {
  // Verifica que el √≠ndice est√© dentro del rango v√°lido
  if (index < 0 || index >= this.classes.length) return 0;

  const clase = this.classes[index];

  // Verifica que la clase existe
  if (!clase) return 0;

  // Si la clase est√° completada, el progreso es del 100%
  if (clase.completed) return 100;

  // Si la clase no est√° desbloqueada, el progreso es 0
  if (!clase.unlocked) return 0;

  // Calcula el total de preguntas del quiz
  const totalQuestions = (clase.quiz && Array.isArray(clase.quiz)) ? clase.quiz.length : 0;

  // Calcula el n√∫mero de preguntas respondidas en la clase actual
  const answeredQuestions = (index === this.currentClass) ? this.currentQuestionIndex : 0;

  // Devuelve el progreso en porcentaje, evitando divisiones por cero
  return totalQuestions > 0 ? Math.round((answeredQuestions / totalQuestions) * 100) : 0;
},

    // Carga los datos del estudiante (por ejemplo, desde sessionStorage)
    async loadStudentData() {
      const storedUser = sessionStorage.getItem("user");
      if (storedUser) {
        this.student = JSON.parse(storedUser);
        this.studentName = `${this.student.nombre} ${this.student.apellido}`;
      } else {
        window.location.href = "login.html";
      }
    },

    // M√©todo para cargar el avance del curso al iniciar
    async loadCourseProgress() {
      if (this.student && this.student.id) {
        const avanceGuardado = await cargarAvance(this.student.id);
        if (avanceGuardado) {
          // Se asume que en la base de datos "modulo_actual" es 1-index (1,2,3,‚Ä¶)
          this.currentClass = avanceGuardado.modulo_actual - 1;
          this.progress = avanceGuardado.porcentaje_completado;
          console.log(`Avance cargado: M√≥dulo ${avanceGuardado.modulo_actual}, ${avanceGuardado.porcentaje_completado}% completado`);
        } else {
          // Si no hay avance, se crea uno inicial (m√≥dulo 1, 0% completado)
          await guardarAvance(this.student.id, 1, 0, "¬°Bienvenido al curso!");
        }
                // Desbloquea las clases hasta el m√≥dulo alcanzado
                this.unlockClasses();
      }
    },

        // Funci√≥n para desbloquear las clases hasta donde el alumno ha avanzado
        unlockClasses() {
      for (let i = 0; i < this.classes.length; i++) {
        // Desbloquea la clase si el √≠ndice es menor o igual al m√≥dulo actual alcanzado
        if (i <= this.currentClass) {
          this.classes[i].unlocked = true;
        } else {
          this.classes[i].unlocked = false;
        }
      }
    },

    // M√©todo que se llama al completar una clase o m√≥dulo
    async completeClass() {
      // Marca la clase actual como completada (esto es para el estado local, por ejemplo, para actualizar la interfaz)
      this.classes[this.currentClass].completed = true;
      
      // Desbloquea la siguiente clase si existe
      if (this.currentClass < this.classes.length - 1) {
        this.classes[this.currentClass + 1].unlocked = true;
      }
      
      // Calcula el nuevo avance:
      // - Se suma 1 al m√≥dulo actual (suponiendo que currentClass es 0-index y modulo_actual es 1-index)
      // - Se incrementa el porcentaje, por ejemplo, 14.29% por m√≥dulo (ajusta este valor seg√∫n el total de m√≥dulos)
      const nuevoModulo = this.currentClass + 1 + 1;
      const incremento = 14.29;
      const nuevoPorcentaje = Math.min(this.progress + incremento, 100);
      
      // Guarda el avance en la base de datos
      await guardarAvance(this.student.id, nuevoModulo, nuevoPorcentaje, "¬°Excelente trabajo, sigue avanzando!");
      
      // Actualiza la variable local de avance y pasa al siguiente m√≥dulo si es necesario
      this.progress = nuevoPorcentaje;
      console.log(`Progreso actualizado: M√≥dulo ${nuevoModulo}, ${nuevoPorcentaje}% completado`);
      
      // Si deseas avanzar en la interfaz:
      if (this.currentClass < this.classes.length - 1) {
        this.currentClass++;
      }
    }

      },

      async mounted() {
    // Se carga la informaci√≥n del estudiante y se verifica el pago
    await this.loadStudentData();
    await this.checkCoursePayment();
    await this.loadCourseProgress();
  
    // Actualiza el gr√°fico de progreso
    this.$nextTick(() => {
      this.updateProgressChart();
    });
  }
    });
  </script>
</body>
</html>
